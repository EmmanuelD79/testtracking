<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_test_recipe_pv_document">
        <t t-call="web.html_container">
            <t t-set="doc_title" t-value="'PV de Recette - %s' % (docs[0].name or '')"/>

            <t t-foreach="docs" t-as="o">
                <div class="page">
                    <!-- Charset et style pour PDF -->
                    <head>
                        <meta charset="utf-8"/>
                        <style>
                            body { font-family: "DejaVu Sans", "Arial", sans-serif; font-size: 12px; }
                            table { border-collapse: collapse; width: 100%; margin-top: 10px; }
                            th, td { border: 1px solid #000; padding: 4px; text-align: left; }
                            h2, h3 { margin: 10px 0; }
                            ul { margin: 0; padding-left: 20px; }
                        </style>
                    </head>

                    <!-- Titre du rapport -->
                    <h2>PV de Recette</h2>

                    <!-- Informations principales -->
                    <p><strong>Projet :</strong> <t t-esc="o.project_id.name"/></p>
                    <p><strong>Nom du test :</strong> <t t-esc="o.name"/></p>
                    <p><strong>Date :</strong> <t t-esc="o.date"/></p>

                    <!-- Liste des testeurs -->
                    <p><strong>Tester :</strong></p>
                    <ul>
                        <t t-foreach="o.tester_id" t-as="tester">
                            <li><t t-esc="tester.name"/></li>
                        </t>
                    </ul>

                    <!-- Tableau des lignes d'exécution -->
                    <h3>Lignes d'exécution</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Nom</th>
                                <th>Action</th>
                                <th>Résultat</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="o.execution_line_ids" t-as="execution_line">
                                <tr>
                                    <td><t t-esc="execution_line.name"/></td>
                                    <td><t t-esc="execution_line.status"/></td>
                                    <td><t t-esc="execution_line.comment"/></td>
                                </tr>
                            </t>
                        </tbody>
                    </table>

                    <!-- État global -->
                    <p><strong>État global :</strong> <t t-esc="o.status"/></p>
                </div>
            </t>
        </t>
    </template>
</odoo>